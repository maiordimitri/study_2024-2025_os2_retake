---
## Author
author:
  name: Майоров Дмитрий Андреевич

## Title
title: Программный RAID

---

# Цель работы

Освоить работу с RAID-массивами при помощи утилиты mdadm.

# Выполнение лабораторной работы

Добавляем к нашей виртуальной машине к контроллеру SATA три диска размером 512 MiB

![](image/img01.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Проверяем наличие созданных нами на предыдущем этапе дисков. Видим диски dev/sdd, /dev/sde,  /dev/sdf

![](image/img02.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Создаем на каждом из дисков раздел

![](image/img03.jpg){#fig-001 width=70%}

![](image/img04.jpg){#fig-001 width=70%}

![](image/img05.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Проверяем текущий тип созданных разделов. Тип - Linux

![](image/img06.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Смотрим, какие типы партиций, относящиеся к RAID, можно задать

![](image/img07.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Устанавливаем тип разделов в Linux raid autodetect

![](image/img08.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Смотрим состояние дисков

![](image/img09.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Устанавливаем утилиту mdadm

![](image/img10.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Создаем массив RAID 1 из двух дисков

![](image/img11.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Проверяем состояние массива RAID

![](image/img12.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Создаем файловую систему на RAID

![](image/img13.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Подмонтируем RAID

![](image/img14.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Открываем файл /etc/fstab для редактирования и вводим туда следующую строку

![](image/img15.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Имитируем сбой одного из дисков. Удаляем сбойный диск. Заменяем диск в массиве

![](image/img16.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Удаляес массив и очищаем метаданные

![](image/img17.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Создаем массив RAID 1 из двух дисков

![](image/img18.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Добавляем третий диск

![](image/img19.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Подмонтируем /dev/md0

![](image/img20.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Проверяем состояние массива

![](image/img21.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Измените тип массива RAID. Проверяем состояние массива

![](image/img22.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Изменяем количество дисков в массиве RAID 5. Проверяем состояние массива

![](image/img23.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Удаляем массив и очищаем метаданные

![](image/img24.jpg){#fig-001 width=70%}

# Выполнение лабораторной работы

Комментируем запись в /etc/fstab

![](image/img25.jpg){#fig-001 width=70%}



# Выводы

Получены навки работы с RAID-массивами при помощи утилиты mdadm
